machine:
  node:
    version: 6.1.0

dependencies:
  override:
    - yarn

test:
  override:
    - npm test

deployment:
  test:
    branch: master
    commands:
      - REACT_APP_API_URL=http://api.test.corva.ai npm run build
      - aws s3 sync ./ s3://app.test.corva.ai/ --delete
  staging:
    branch: /release\/.*/
    commands:
      - REACT_APP_API_URL=http://api.staging.corva.ai npm run build
      - aws s3 sync ./ s3://app.staging.corva.ai/ --delete
  production:
    branch: production
    commands:
      - REACT_APP_API_URL=http://api.corva.ai npm run build
      - aws s3 sync ./ s3://app.corva.ai/ --delete
