# Dev Notes 2017-01-04

## Authentication

Added a Redux middleware (`authMiddleware.js`) that will intercept any server-accessing action handlers and check for authentication problems in the response. They will be redirected to the login page. This is to handle situations where the user's authentication token expires in the middle of their session. (Previously this was handled only when the application loaded.)

## Result Loading

* Changed the subscription sequence so that apps will always first request the initial data from `corva-api` over an HTTP call, and only rely on the WebSocket connection for future updates. This is in preparation for the non-realtime data access case. It also adds some resiliency, in that apps will always be able to show *some* data even if there was some issue with `corva-subscriptions`.

## General

Replaced Moment.js with [date-fns](https://date-fns.org/) for date management, because it's clearer to always work with native `Date`s instead of custom objects, and also unlike Moment, date-fns always treats Dates as immutable, which can prevent a lot of confusion.
